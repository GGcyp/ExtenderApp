<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:ExtenderApp.Media.Themes">
    <Thickness x:Key="HorizontalDecreaseRepeatButtonMargin">0 0 -2 0</Thickness>
    <Thickness x:Key="HorizontalIncreaseRepeatButtonMargin">-2 0 0 0</Thickness>
    <Thickness x:Key="VerticalDecreaseRepeatButtonMargin">0 0 0 -2</Thickness>
    <Thickness x:Key="VerticalIncreaseRepeatButtonMargin">0 -2 0 0</Thickness>

    <Style x:Key="MediaThumbStyle" TargetType="Thumb">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Ellipse Stretch="Uniform"
                             StrokeThickness="2"
                             Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"
                             Fill="{Binding ThumbColor, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"
                             Height="{Binding ThumbSize, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"
                             Width="{Binding ThumbSize, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="LeftSliderRepeatButtonStyle" TargetType="RepeatButton">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RepeatButton">
                    <Border Height="{TemplateBinding Height}"
                            Width="{TemplateBinding Width}"
                            Background="{Binding LeftBackground, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="RightSliderRepeatButtonStyle" TargetType="RepeatButton">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RepeatButton">
                    <Border Height="{TemplateBinding Height}"
                            Width="{TemplateBinding Width}"
                            Background="{Binding RightBackground, RelativeSource={RelativeSource AncestorType={x:Type local:MediaSlider}}}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 水平模板（保留原来行为） -->
    <ControlTemplate x:Key="HorizontalMediaSliderTemplate" TargetType="{x:Type local:MediaSlider}">
        <Grid ClipToBounds="False">
            <Track Name="PART_Track" Orientation="{TemplateBinding Orientation}">
                <Track.DecreaseRepeatButton>
                    <RepeatButton Style="{StaticResource LeftSliderRepeatButtonStyle}"
                                  Command="Slider.DecreaseLarge"
                                  Height="{TemplateBinding TrackHeight}"
                                  Margin="{StaticResource HorizontalDecreaseRepeatButtonMargin}"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Center"/>
                </Track.DecreaseRepeatButton>
                <Track.IncreaseRepeatButton>
                    <RepeatButton Style="{StaticResource RightSliderRepeatButtonStyle}"
                                  Command="Slider.IncreaseLarge"
                                  Height="{TemplateBinding TrackHeight}"
                                  Margin="{StaticResource HorizontalIncreaseRepeatButtonMargin}"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Center"/>
                </Track.IncreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource MediaThumbStyle}"
                           Panel.ZIndex="2"
                           VerticalAlignment="Center"/>
                </Track.Thumb>
            </Track>
        </Grid>
    </ControlTemplate>

    <!-- 竖直模板：将轨道厚度绑定到 RepeatButton.Width，并让按钮在垂直方向伸展 -->
    <ControlTemplate x:Key="VerticalMediaSliderTemplate" TargetType="{x:Type local:MediaSlider}">
        <Grid ClipToBounds="False">
            <Track Name="PART_Track" Orientation="{TemplateBinding Orientation}">
                <Track.DecreaseRepeatButton>
                    <RepeatButton Style="{StaticResource LeftSliderRepeatButtonStyle}"
                                  Command="Slider.DecreaseLarge"
                                  Width="{TemplateBinding TrackHeight}"
                                  Margin="{StaticResource VerticalDecreaseRepeatButtonMargin}"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Stretch"/>
                </Track.DecreaseRepeatButton>
                <Track.IncreaseRepeatButton>
                    <RepeatButton Style="{StaticResource RightSliderRepeatButtonStyle}"
                                  Command="Slider.IncreaseLarge"
                                  Width="{TemplateBinding TrackHeight}"
                                  Margin="{StaticResource VerticalIncreaseRepeatButtonMargin}"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Stretch"/>
                </Track.IncreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource MediaThumbStyle}"
                           Panel.ZIndex="2"
                           HorizontalAlignment="Center"/>
                </Track.Thumb>
            </Track>
        </Grid>
    </ControlTemplate>

    <Style TargetType="{x:Type local:MediaSlider}">
        <Setter Property="IsSnapToTickEnabled" Value="True"/>
        <Setter Property="LargeChange" Value="10"/>
        <Setter Property="SmallChange" Value="1"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <!-- 默认使用水平模板 -->
        <Setter Property="Template" Value="{StaticResource HorizontalMediaSliderTemplate}"/>
        <!-- 根据 Orientation 切换模板 -->
        <Style.Triggers>
            <Trigger Property="Orientation" Value="Vertical">
                <Setter Property="Template" Value="{StaticResource VerticalMediaSliderTemplate}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary>